{% comment %}
Pagination Component
Usage: {% include 'components/pagination.html' with page_obj=watches %}

Expects:
- page_obj: Django Page object with pagination info
- Optional: base_url (default: current path)
- Optional: query_params (additional query string)
{% endcomment %}

{% if page_obj.has_other_pages %}
<nav aria-label="Page navigation" class="mt-4">
    <ul class="pagination justify-content-center mb-0">
        {# First page #}
        {% if page_obj.number > 3 %}
        <li class="page-item">
            <a class="page-link bg-dark border-secondary text-light" 
               href="{% if base_url %}{{ base_url }}{% else %}{{ request.path }}{% endif %}?page=1{% if query_params %}&{{ query_params }}{% endif %}"
               title="First page">
                <span data-feather="chevrons-left" style="width:14px;height:14px;"></span>
            </a>
        </li>
        {% endif %}
        
        {# Previous page #}
        {% if page_obj.has_previous %}
        <li class="page-item">
            <a class="page-link bg-dark border-secondary text-light" 
               href="{% if base_url %}{{ base_url }}{% else %}{{ request.path }}{% endif %}?page={{ page_obj.previous_page_number }}{% if query_params %}&{{ query_params }}{% endif %}"
               title="Previous page">
                <span data-feather="chevron-left" style="width:14px;height:14px;"></span>
            </a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <span class="page-link bg-dark border-secondary text-muted">
                <span data-feather="chevron-left" style="width:14px;height:14px;"></span>
            </span>
        </li>
        {% endif %}
        
        {# Page numbers #}
        {% for num in page_obj.paginator.page_range %}
            {% if num > page_obj.number|add:'-4' and num < page_obj.number|add:'4' %}
                {% if page_obj.number == num %}
                <li class="page-item active">
                    <span class="page-link bg-primary border-primary text-dark">{{ num }}</span>
                </li>
                {% else %}
                <li class="page-item">
                    <a class="page-link bg-dark border-secondary text-light" 
                       href="{% if base_url %}{{ base_url }}{% else %}{{ request.path }}{% endif %}?page={{ num }}{% if query_params %}&{{ query_params }}{% endif %}">
                        {{ num }}
                    </a>
                </li>
                {% endif %}
            {% endif %}
        {% endfor %}
        
        {# Next page #}
        {% if page_obj.has_next %}
        <li class="page-item">
            <a class="page-link bg-dark border-secondary text-light" 
               href="{% if base_url %}{{ base_url }}{% else %}{{ request.path }}{% endif %}?page={{ page_obj.next_page_number }}{% if query_params %}&{{ query_params }}{% endif %}"
               title="Next page">
                <span data-feather="chevron-right" style="width:14px;height:14px;"></span>
            </a>
        </li>
        {% else %}
        <li class="page-item disabled">
            <span class="page-link bg-dark border-secondary text-muted">
                <span data-feather="chevron-right" style="width:14px;height:14px;"></span>
            </span>
        </li>
        {% endif %}
        
        {# Last page #}
        {% if page_obj.number < page_obj.paginator.num_pages|add:'-2' %}
        <li class="page-item">
            <a class="page-link bg-dark border-secondary text-light" 
               href="{% if base_url %}{{ base_url }}{% else %}{{ request.path }}{% endif %}?page={{ page_obj.paginator.num_pages }}{% if query_params %}&{{ query_params }}{% endif %}"
               title="Last page">
                <span data-feather="chevrons-right" style="width:14px;height:14px;"></span>
            </a>
        </li>
        {% endif %}
    </ul>
    
    {# Page info #}
    <div class="text-center mt-3">
        <small class="text-muted">
            Showing {{ page_obj.start_index }} - {{ page_obj.end_index }} of {{ page_obj.paginator.count }} results
        </small>
    </div>
</nav>
{% endif %}
